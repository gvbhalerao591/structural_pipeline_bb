+ '[' 5 -eq 0 ']'
+ '[' 5 -lt 5 ']'
++ getopt1 --workingdir --workingdir=./T1_GDC/ --in=T1_orig.nii.gz --out=T1_orig_ud.nii.gz --owarp=T1_orig_ud_warp.nii.gz --coeff=/vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
++ sopt=--workingdir
++ shift 1
++ for fn in $@
+++ echo --workingdir=./T1_GDC/
+++ grep -- '^--workingdir='
+++ wc -w
++ '[' 1 -gt 0 ']'
++ echo --workingdir=./T1_GDC/
++ sed 's/^--workingdir=//'
++ return 0
+ WD=./T1_GDC/
++ getopt1 --in --workingdir=./T1_GDC/ --in=T1_orig.nii.gz --out=T1_orig_ud.nii.gz --owarp=T1_orig_ud_warp.nii.gz --coeff=/vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
++ sopt=--in
++ shift 1
++ for fn in $@
+++ echo --workingdir=./T1_GDC/
+++ wc -w
+++ grep -- '^--in='
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --in=T1_orig.nii.gz
+++ wc -w
+++ grep -- '^--in='
++ '[' 1 -gt 0 ']'
++ echo --in=T1_orig.nii.gz
++ sed 's/^--in=//'
++ return 0
+ InputFile=T1_orig.nii.gz
++ getopt1 --out --workingdir=./T1_GDC/ --in=T1_orig.nii.gz --out=T1_orig_ud.nii.gz --owarp=T1_orig_ud_warp.nii.gz --coeff=/vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
++ sopt=--out
++ shift 1
++ for fn in $@
+++ echo --workingdir=./T1_GDC/
+++ wc -w
+++ grep -- '^--out='
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --in=T1_orig.nii.gz
+++ wc -w
+++ grep -- '^--out='
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --out=T1_orig_ud.nii.gz
+++ wc -w
+++ grep -- '^--out='
++ '[' 1 -gt 0 ']'
++ echo --out=T1_orig_ud.nii.gz
++ sed 's/^--out=//'
++ return 0
+ OutputFile=T1_orig_ud.nii.gz
++ getopt1 --owarp --workingdir=./T1_GDC/ --in=T1_orig.nii.gz --out=T1_orig_ud.nii.gz --owarp=T1_orig_ud_warp.nii.gz --coeff=/vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
++ sopt=--owarp
++ shift 1
++ for fn in $@
+++ echo --workingdir=./T1_GDC/
+++ grep -- '^--owarp='
+++ wc -w
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --in=T1_orig.nii.gz
+++ wc -w
+++ grep -- '^--owarp='
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --out=T1_orig_ud.nii.gz
+++ wc -w
+++ grep -- '^--owarp='
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --owarp=T1_orig_ud_warp.nii.gz
+++ wc -w
+++ grep -- '^--owarp='
++ '[' 1 -gt 0 ']'
++ echo --owarp=T1_orig_ud_warp.nii.gz
++ sed 's/^--owarp=//'
++ return 0
+ OutputTransform=T1_orig_ud_warp.nii.gz
++ getopt1 --coeff --workingdir=./T1_GDC/ --in=T1_orig.nii.gz --out=T1_orig_ud.nii.gz --owarp=T1_orig_ud_warp.nii.gz --coeff=/vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
++ sopt=--coeff
++ shift 1
++ for fn in $@
+++ echo --workingdir=./T1_GDC/
+++ grep -- '^--coeff='
+++ wc -w
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --in=T1_orig.nii.gz
+++ wc -w
+++ grep -- '^--coeff='
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --out=T1_orig_ud.nii.gz
+++ wc -w
+++ grep -- '^--coeff='
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --owarp=T1_orig_ud_warp.nii.gz
+++ wc -w
+++ grep -- '^--coeff='
++ '[' 0 -gt 0 ']'
++ for fn in $@
+++ echo --coeff=/vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
+++ wc -w
+++ grep -- '^--coeff='
++ '[' 1 -gt 0 ']'
++ echo --coeff=/vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
++ sed 's/^--coeff=//'
++ return 0
+ InputCoefficients=/vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
++ /cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl/6.0.7.13/bin/remove_ext T1_orig_ud.nii.gz
+ OutputFile=T1_orig_ud
++ defaultopt ./T1_GDC/ T1_orig_ud.wdir
++ echo ./T1_GDC/
+ WD=./T1_GDC/
++ /cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl/6.0.7.13/bin/remove_ext T1_orig.nii.gz
+ BaseName=T1_orig
++ basename T1_orig
+ BaseName=T1_orig
+ echo ' '
+ echo ' START: GradientDistortionUnwarp'
+ mkdir -p ./T1_GDC/
+ /cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl/6.0.7.13/bin/fslroi T1_orig.nii.gz ./T1_GDC//T1_orig_vol1.nii.gz 0 1
++ /vols/Data/BIRAX/BIRAX_proc_GVB/tests/bb_pipeline/bb_pipeline_tools/bb_fsl_abspath /vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
+ InputCoeffs=/vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad
++ pwd
+ ORIGDIR=/vols/Data/BIRAX/BIRAX_proc_GVB/tests/test02/T1
+ cd ./T1_GDC/
+ . /vols/Data/BIRAX/BIRAX_proc_GVB/tests/bb_pipeline/bb_python/bb_python_gradunwarp/bin/activate
++ deactivate nondestructive
++ '[' -n '' ']'
++ '[' -n '' ']'
++ '[' -n /usr/bin/bash -o -n '' ']'
++ hash -r
++ '[' -n '' ']'
++ unset VIRTUAL_ENV
++ '[' '!' nondestructive = nondestructive ']'
++ VIRTUAL_ENV=/vols/Data/psychiatry/BHC/scripts/bb_pipeline_v_2.6/bb_python/bb_python_gradunwarp
++ export VIRTUAL_ENV
++ _OLD_VIRTUAL_PATH=/cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl/6.0.7.13/share/fsl/bin:/cvmfs/software.fmrib.ox.ac.uk/neuro/el9/software/zfs_quota_client/bin:/cvmfs/software.fmrib.ox.ac.uk/eb/el9/software/Miniforge3/24.1.2-0/bin:/cvmfs/software.fmrib.ox.ac.uk/eb/el9/software/Miniforge3/24.1.2-0/condabin:/home/fs0/mcz502/.local/bin:/home/fs0/mcz502/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl_sub/2.8.3/bin
++ PATH=/vols/Data/psychiatry/BHC/scripts/bb_pipeline_v_2.6/bb_python/bb_python_gradunwarp/bin:/cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl/6.0.7.13/share/fsl/bin:/cvmfs/software.fmrib.ox.ac.uk/neuro/el9/software/zfs_quota_client/bin:/cvmfs/software.fmrib.ox.ac.uk/eb/el9/software/Miniforge3/24.1.2-0/bin:/cvmfs/software.fmrib.ox.ac.uk/eb/el9/software/Miniforge3/24.1.2-0/condabin:/home/fs0/mcz502/.local/bin:/home/fs0/mcz502/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl_sub/2.8.3/bin
++ export PATH
++ '[' -n '' ']'
++ '[' -z '' ']'
++ _OLD_VIRTUAL_PS1=
++ '[' 'x(bb_python_gradunwarp) ' '!=' x ']'
++ PS1='(bb_python_gradunwarp) '
++ export PS1
++ '[' -n /usr/bin/bash -o -n '' ']'
++ hash -r
+ /vols/Data/BIRAX/BIRAX_proc_GVB/tests/bb_pipeline/bb_pipeline_tools/bb_gradient_unwarp.py T1_orig_vol1.nii.gz trilinear.nii.gz siemens -g /vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad -n
gradunwarp-INFO: Parsing /vols/Data/psychiatry/BHC/scripts/bhc_data/OHBA_Prisma_coeff.grad for harmonics coeffs
gradunwarp-INFO: Evaluating spherical harmonics
gradunwarp-INFO: on a 60^3 grid
gradunwarp-INFO: with extents -300.0mm to 300.0mm
gradunwarp-INFO: along x...
gradunwarp-INFO: along y...
gradunwarp-INFO: along z...
gradunwarp-INFO: Evaluating the jacobian multiplier
gradunwarp-INFO: Unwarping slice by slice
gradunwarp-INFO: Writing output to trilinear.nii.gz
+ deactivate
+ '[' -n /cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl/6.0.7.13/share/fsl/bin:/cvmfs/software.fmrib.ox.ac.uk/neuro/el9/software/zfs_quota_client/bin:/cvmfs/software.fmrib.ox.ac.uk/eb/el9/software/Miniforge3/24.1.2-0/bin:/cvmfs/software.fmrib.ox.ac.uk/eb/el9/software/Miniforge3/24.1.2-0/condabin:/home/fs0/mcz502/.local/bin:/home/fs0/mcz502/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl_sub/2.8.3/bin ']'
+ PATH=/cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl/6.0.7.13/share/fsl/bin:/cvmfs/software.fmrib.ox.ac.uk/neuro/el9/software/zfs_quota_client/bin:/cvmfs/software.fmrib.ox.ac.uk/eb/el9/software/Miniforge3/24.1.2-0/bin:/cvmfs/software.fmrib.ox.ac.uk/eb/el9/software/Miniforge3/24.1.2-0/condabin:/home/fs0/mcz502/.local/bin:/home/fs0/mcz502/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl_sub/2.8.3/bin
+ export PATH
+ unset _OLD_VIRTUAL_PATH
+ '[' -n '' ']'
+ '[' -n /usr/bin/bash -o -n '' ']'
+ hash -r
+ '[' -n '' ']'
+ unset VIRTUAL_ENV
+ '[' '!' '' = nondestructive ']'
+ unset -f deactivate
+ cd /vols/Data/BIRAX/BIRAX_proc_GVB/tests/test02/T1
+ /cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl/6.0.7.13/bin/convertwarp --abs --ref=./T1_GDC//trilinear.nii.gz --warp1=./T1_GDC//fullWarp_abs.nii.gz --relout --out=T1_orig_ud_warp.nii.gz
+ /cvmfs/fsl.fmrib.ox.ac.uk/el9/fsl/6.0.7.13/bin/applywarp --rel --interp=spline -i T1_orig.nii.gz -r ./T1_GDC//T1_orig_vol1.nii.gz -w T1_orig_ud_warp.nii.gz -o T1_orig_ud --paddingsize=1
+ echo ' '
+ echo ' END: GradientDistortionUnwarp'
++ date
+ echo ' END: Mon 23 Sep 18:10:28 BST 2024'
